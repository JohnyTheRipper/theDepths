<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Side View Platformer with Smooth Jumping</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            font-family: Arial, sans-serif;
        }
        canvas {
            border: 1px solid #000;
            background-color: #fff;
        }
    </style>
</head>
<body>
    <canvas id="gameCanvas"></canvas>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const canvas = document.getElementById('gameCanvas');
            const ctx = canvas.getContext('2d');

            const screenWidth = window.innerWidth;
            const screenHeight = window.innerHeight;
            const canvasWidth = screenWidth - 50;
            const canvasHeight = screenHeight;

            canvas.width = canvasWidth;
            canvas.height = canvasHeight;

            const numTilesHorizontally = 20;
            const numTilesVertically = 15;

            const tileSizeWidth = canvasWidth / numTilesHorizontally;
            const tileSizeHeight = canvasHeight / numTilesVertically;

            function calculateTileHeight() {
                return tileSizeHeight;
            }

            const tiles = [];
            for (let y = 0; y < numTilesVertically; y++) {
                tiles[y] = [];
                for (let x = 0; x < numTilesHorizontally; x++) {
                    tiles[y][x] = {
                        height: calculateTileHeight()
                    };
                }
            }

            const player = {
                x: 50,
                y: canvasHeight - tileSizeHeight - 50,
                width: 30,
                height: 50,
                speed: 300,
                jumpVelocity: -500,
                gravity: 2000,
                isJumping: false,
                velocityY: 0
            };

            let keys = {};

            function handleKeyDown(event) {
                keys[event.key] = true;
            }

            function handleKeyUp(event) {
                keys[event.key] = false;
            }

            document.addEventListener('keydown', handleKeyDown);
            document.addEventListener('keyup', handleKeyUp);

            function update(deltaTime) {
                // Handle horizontal movement
                if (keys['ArrowLeft'] && player.x > 0) {
                    player.x -= player.speed * deltaTime;
                }
                if (keys['ArrowRight'] && player.x + player.width < canvasWidth) {
                    player.x += player.speed * deltaTime;
                }

                // Handle jumping
                if ((keys['ArrowUp'] || keys[' ']) && !player.isJumping) {
                    player.isJumping = true;
                    player.velocityY = player.jumpVelocity;
                }

                // Apply gravity
                if (player.isJumping) {
                    player.velocityY += player.gravity * deltaTime;
                    player.y += player.velocityY * deltaTime;

                    // Check collision with ground
                    if (player.y + player.height >= canvasHeight - tileSizeHeight) {
                        player.isJumping = false;
                        player.y = canvasHeight - tileSizeHeight - player.height;
                        player.velocityY = 0;
                    }
                }
            }

            function render() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                // Draw background tiles
    for (let y = 0; y < numTilesVertically; y++) {
        for (let x = 0; x < numTilesHorizontally; x++) {
            const tile = tiles[y][x];
            // ctx.fillStyle = '#ccc'; // Remove this line
            const posX = x * tileSizeWidth;
            const posY = y * tileSizeHeight;
            // ctx.fillRect(posX, posY, tileSizeWidth, tile.height); // Remove this line

            // Draw tile image
            // Replace 'tileImage.png' with the path to your background tile image
            const tileImage = new Image();
            tileImage.src = 'background/Yellow.png'; // Path to your background tile image

            tileImage.onload = function() {
                ctx.drawImage(tileImage, posX, posY, tileSizeWidth, tile.height);
            };
        }
    }

                // Draw player
                ctx.fillStyle = 'blue';
                ctx.fillRect(player.x, player.y, player.width, player.height);
            }

            function gameLoop() {
                const currentTime = performance.now();
                const deltaTime = (currentTime - lastTime) / 1000; // Convert to seconds

                update(deltaTime);
                render();

                lastTime = currentTime;
                requestAnimationFrame(gameLoop);
            }

            let lastTime = performance.now();
            gameLoop(); // Start the game loop
        });
    </script>
</body>
</html>
